{% extends 'JarryUbuBundle::masterlayout.html.twig' %}

{% block title %}
    UBU see a Node
{% endblock %}

{% block titre %}
    UBU Node
{% endblock %}


{% block navigationZone %}
    <a href="{{ path('fos_user_security_logout') }}"><li class="{{ navDarkCss }}"><img src="{{ asset('bundles/jarryubu/images/log-mini.png') }}"/>LOGOUT</li></a>
    <a href="{{ path('jarry_ubu_homepage') }}"><li class="{{ navCss }}">Page d'accueil</li></a>
    <a href="{{ path('node_edit', { 'id': entity.id,  'idZone': entity.zone.id, 'idPlace': entity.zone.place.id }) }}" class="{{ navCss }}"><img src="{{ asset('bundles/jarryubu/images/node-mini.png') }}"/>Éditer le node {{ entity.name }}</a>
    <a href="{{ path('ubu_place') }}"><li class="{{ navCss }}"><img src="{{ asset('bundles/jarryubu/images/house-mini.png') }}"/>Liste des places</li></a>
    <a href="{{ path('ubu_place') }}{{ entity.zone.place.id }}"><li class="{{ navCss }}"><img src="{{ asset('bundles/jarryubu/images/house-mini.png') }}"/>Retour à la Place {{ entity.zone.place.name }}</li></a>
    <a href="{{ path('zone_show', { 'id' : entity.zone.id, 'idPlace': entity.zone.place.id }) }}"><li class="{{ navCss }}"><img src="{{ asset('bundles/jarryubu/images/zone-mini.png') }}"/>Visualiser la zone {{ entity.zone.name }}</li></a>
    <a href="{{ path('jarry_ubu_homepage') }}"><li class="{{ navDarkCss }}">Mentions légales</li></a>
{% endblock %}

{% block content -%}
    <main class="mdl-layout__content fond">
        <div class="mdl-grid demo-content">
            <div class="{{ titreCss }}">
                <img src="{{ asset('bundles/jarryubu/images/node.png') }}"/>
                <h3 class="centrer">{{ entity.name|upper }}</h3>
            </div>
            <div class="{{ containerCss }}">
                <div class="{{ carreTextCss }}">
                    <h3>NOM</h3>
                    <p>{{ entity.name }}</p>
                </div>
                <div class="{{ carreTextCss }}">
                    <h3>IP</h3>
                    <p>{{ entity.ip }}</p>
                </div>
                <div class="{{ carreTextCss }}">
                    <h3>Type</h3>
                    <p>{{ entity.nodeType }}</p>
                    <ul>
                        {% for capability in entity.capabilities %}
                            <li>{{ capability.capaName }}</li>
                            {% endfor %}
                    </ul>
                </div>
                <div class="{{ carreTextCss }}">
                    {% if tempActor != false %}
                    <p>Régler le thermostat</p>
                    <form class="formulaire" action="{{ path('node_thermo' , {'id': entity.id,  'idZone': entity.zone.id, 'idPlace': entity.zone.place.id }) }}" method="post" id="fix_temp">
                       <input class="mdl-slider mdl-js-slider" type="range"
                        min="10" max="30" value="{{ tempActor }}" tabindex="0" id="regleTemp" onchange="affiche();" name="reglage"/>
                    </form>
                       <h3 id="affichTemp">{{ tempActor }}</h3>
                    <button type="submit" form="fix_temp"  class="{{ btn3Css }}" value="Modifier">Modifier</button>
                    {% endif %}
                </div>
            </div>
            
            <div class="{{ containerCss }}">

                <a href="{{ path('zone_show' , { 'id': entity.zone.id, 'idPlace': entity.zone.place.id })  }}" class="{{ btnCss }}">
                    LISTE DES NODES
                </a>

                <a href="{{ path('node_edit', { 'id': entity.id,  'idZone': entity.zone.id, 'idPlace': entity.zone.place.id }) }}" class="{{ btnCss }}">
                    ÉDITER {{ entity.name }}
                </a>


                {{ form(delete_form) }}
            </div>
            <div class="{{ titreCss }}">
                <img src="{{ asset('bundles/jarryubu/images/stat.png') }}"/>
                <h3 class="centrer">Statistiques de {{ entity.name|upper }}</h3>
            </div>
            <div class="{{ containerCss }}">
                

                <div id="linechart" style="min-width: 100%; height: 220px;"></div>
            </div>
            
            <div class="{{ containerCss }}">
                

                <div id="barchart" style="min-width: 100%; height: 220px;"></div>
            </div>
            
        </div>
    </main>
{% endblock %}

{% block jscrip2 %}
    {{ parent() }}
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" ></script>
    <script src="{{ asset('bundles/jarryubu/js/highcharts.js') }}"></script>
     <script src="{{ asset('bundles/jarryubu/js/thermal.js') }}"></script>
    <script src="{{ asset('bundles/obhighcharts/js/highcharts/modules/exporting.js') }}"></script>
    <script type="text/javascript">
        {{ chart(linechart) }}
        {{ chart(barchart) }}
    </script>
     
{% endblock jscrip2 %}
